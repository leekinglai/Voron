[include mmu/base/*.cfg]
[include mmu/optional/client_macros.cfg]



####################################################################################
#                         3D打印极客驿站                                            #
####################################################################################
#教程地址：链接：https://pan.baidu.com/s/1DkLtcNkXWju7hAZFVeibNg?pwd=3okl 提取码：3okl
#售后联系方式
#微信 Wechat ：iamjuehui
#手机 TEL    ：18569487608
#邮箱 email  ：wind.zhu@foxmail.com
#工作时间    ：北京时间每周一到周五 9:00-18:00（节假日除外）
#工作时间    ：北京时间每周一到周五 9:00-18:00（节假日除外）
#官方淘宝地址 ：https://shop589036163.taobao.com/?spm=2013.1.1000126.3.30d76c81kXC2dj
####################################################################################
#                   感谢您的惠顾，有问题请联系我们！
####################################################################################
[include mainsail.cfg]
[include moonraker_obico_macros.cfg]
[include stealthburner_led_effects_10_leds.cfg]
[include CLEAN_NOZZLE.cfg]
[include Nevermore.cfg]
[include timelapse.cfg]
[include TEST_SPEED.cfg]
[include IDM.cfg]
[include IDM_Temperature.cfg]


#[include KAMP_Settings.cfg]
#[include ./KAMP/Adaptive_Meshing.cfg]
#[include ./KAMP/Line_Purge.cfg]
#[include ./KAMP/Voron_Purge.cfg]
#[include ./KAMP/Smart_Park.cfg]

# Enable object exclusion
[exclude_object]

[skew_correction] 

[firmware_retraction]


[mcu]
canbus_uuid: 175c786dd718 #spider 3.0
#serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_3E0035000251323438323636-if00

#serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_5C0040000251323438323636-if00 #old board

[printer]                           #打印机设置
kinematics: corexy

max_velocity: 10000            # 最大速度（最大 300）
max_accel: 4000 	          # 最大加速度（最大 4000）
#max_accel_to_decel: 4000     # 最大加速至减速（最大 4000）
max_z_velocity: 15           # Z轴最大速度
max_z_accel: 300             # Z轴最大加速度
square_corner_velocity: 5.0  # 方形拐角速度

#SHAPER_CALIBRATE
#ACCELEROMETER_QUERY
#MEASURE_AXES_NOISE

#[include PIS.cfg]
#[input_shaper]
#shaper_type_x = zv
#shaper_freq_x = 30.8
#shaper_type_y = 2hump_ei
#shaper_freq_y = 46.2

# Custom test result of IDM 10/03/2025 dragon hotend
[input_shaper]
shaper_type_x = 2hump_ei
shaper_freq_x = 47.0
shaper_type_y = ei
shaper_freq_y = 34.4

# Enable arcs support
[gcode_arcs]
resolution: 0.1

#[auto_speed]

#[auto_tap]
#tap_version: DEV

[force_move]
enable_force_move: true

####################################################################################
#                  [X/Y Stepper Settings]
####################################################################################
#   B(X) ---------A(Y)
#   |                       |
#   |--------E-------|
#   |                       |
#   |                       |
#   |                       |
####################################################################################
[stepper_x]                                 # Connected to X-MOT (B Motor)
step_pin: PE11                           # X-axis motor pulse pin setting
dir_pin: PE10                            # X-axis motor direction pin setting
enable_pin: PE9                       # X-axis motor enable pin setting
rotation_distance: 40                # Active pulley circumference mm (2GT-20T pulley 40, 2GT-16T pulley 32)
microsteps: 16                         # Motor microsteps Setting
full_steps_per_rotation:200           # Number of pulses required for a single motor revolution (1.8 degree motor: 200, 0.9 degree motor: 400)
endstop_pin: ^PB14                    # Limit switch PIN pin setting（X-）
position_min: 0                           # X-axis minimum travel - software limit
position_endstop: 300                # Mechanical reset point coordinates for X-axis (change to 300 for 300 models)
position_max: 300                     # X-axis maximum travel - software limit (change to 300 for 300 models)
homing_speed: 50 #100 #25                    # Reset speed maximum 100
homing_retract_dist: 5             # Setback distance after the first trigger of the reset switch
homing_positive_dir: true       # Direction of reset (generally no change required)

#[tmc2209 stepper_x]                  # Stepper motor-X tmc2209 driver
#uart_pin: PE7                            # drive communications port
#interpolate: True                      # Whether to enable 256 microstep interpolation
#run_current: 1.0                       # Motor running current value(mA)
#sense_resistor: 0.110               # Do not change the drive sampling resistor
#stealthchop_threshold: 0 #200          # Mute threshold

[stepper_y]                                # Connected to X-MOT (A Motor)
step_pin: PD8                           # Y-axis motor pulse pin
dir_pin: PB12                            # Y-axis motor direction pin setting
enable_pin: PD9                     # Y-axis motor enable pin setting
rotation_distance: 40              # Active pulley circumference mm (2GT-20T pulley 40, 2GT-16T pulley 32)
microsteps: 16                       # Motor microsteps Setting
full_steps_per_rotation:200          # Number of pulses required for a single motor revolution (1.8 degree motor: 200, 0.9 degree motor: 400)
endstop_pin: ^PB13                   # Limit switch PIN pin setting（Y-）
position_min: 0                          # Y-axis minimum travel - software limit
position_endstop: 300               # Mechanical reset point coordinates for Y-axis (change to 300 for 300 models)
position_max: 300                    # Y-axis maximum travel - software limit (change to 300 for 300 models)
homing_speed: 50 #100 #25                   # Reset speed maximum 100
homing_retract_dist: 5            # Setback distance after the first trigger of the reset switch
homing_positive_dir: true       # Direction of reset (generally no change required)

#[tmc2209 stepper_y]                 # Stepper motor-Y tmc2209 driver
#uart_pin: PE15                         # drive communications port
#interpolate: True                     # Whether to enable 256 microstep interpolation
#run_current: 1.0                      # Motor running current value(mA)
#sense_resistor: 0.110               # Do not change the drive sampling resistor
#stealthchop_threshold: 0 #200          # Mute threshold

####################################################################################
#  Z轴步进电机 Z Stepper Settings
####################################################################################
#   z1 ----开关 --- z2
#   |              |
#   |              |
#   |              |
#   |              |
#  z0---显示屏--- z3
## Z0 步进电机 - 左前 on MOTOR2_1
[stepper_z]                         # 步进电机-z
step_pin: PD14                      # Z电机脉冲引脚
dir_pin: PD13                      # 方向设置
enable_pin: !PD15                   # 使能引脚
rotation_distance: 40               # 主动轮周长mm （2GT-20T为 40mm  16T为 32mm）
gear_ratio: 80:16                   # 减速比
microsteps: 16                      # 细分
##  In Z- Position
endstop_pin: probe:z_virtual_endstop
###position_endstop: 1.950             #按实际修改
position_max: 260                   #Z轴最大打印高度
position_min: -20                   # 软限位最小行程
homing_speed: 20                    # 复位速度-最大 20
second_homing_speed: 3             # 二次复位速度-最大 10
#homing_retract_dist: 3              # 后撤距离
homing_retract_dist: 0 # idm needs this to be set to 0

#[tmc2209 stepper_z]                 # 步进电机-z tmc2209驱动
#uart_pin: PD10                      # 驱动通信端口
#uart_address: 0
#interpolate: True                   # 微步插值256
#run_current: 0.8                    # 运行电流mA
#hold_current: 0.8 #0.4                   # 保持电流mA
#sense_resistor: 0.110               # 驱动采样电阻不要改
#stealthchop_threshold: 200          # 静音阀值

##	In E1-MOT Position
##	Z1 步进电机 - 左后 on MOTOR3
[stepper_z1]                        # 步进电机-z1
step_pin: PE6                       # Z1电机脉冲引脚
dir_pin: !PC13                      # 方向设置
enable_pin: !PE5                    # 使能引脚
rotation_distance: 40             # 主动轮周长mm （2GT-20T为 40mm  16T为 32mm）
gear_ratio: 80:16                   # 减速比
microsteps: 16                      # 细分

##	Make sure to update below for your relevant driver (2208 or 2209)
#[tmc2209 stepper_z1]                # 步进电机-z1 tmc2209驱动
#uart_pin: PC14                      # 驱动通信端口
#interpolate: True                   # 微步插值256
#run_current: 0.8                    # 运行电流mA
#hold_current: 0.8 #0.4                   # 保持电流mA
#sense_resistor: 0.110               # 驱动采样电阻不要改
#stealthchop_threshold: 200          # 静音阀值

##	In E2-MOT Position
##	Z2 Stepper - Rear Right
[stepper_z2]                        # 步进电机-z2
step_pin: PE2                       # Z2电机脉冲引脚
dir_pin: PE4                        # 方向设置
enable_pin: !PE3                    # 使能引脚
rotation_distance: 40            # 主动轮周长mm （2GT-20T为 40mm  16T为 32mm）
gear_ratio: 80:16                   # 减速比
microsteps: 16                      # 细分

##	Make sure to update below for your relevant driver (2208 or 2209)
#[tmc2209 stepper_z2]                # 步进电机-z2 tmc2209驱动
#uart_pin: PC15                      # 驱动通信端口
#interpolate: True                   # 微步插值256
#run_current: 0.8                    # 运行电流mA
#hold_current: 0.8 #0.4                   # 保持电流mA
#sense_resistor: 0.110               # 驱动采样电阻不要改
#stealthchop_threshold: 200          # 静音阀值

##	In E3-MOT Position
##	Z3 步进电机 - 右前 on MOTOR5
[stepper_z3]                        # 步进电机-z3
step_pin: PD12                      # Z3电机脉冲引脚
dir_pin: !PC4                       # 方向设置
enable_pin: !PE8                    # 使能引脚
rotation_distance: 40            # 主动轮周长mm （2GT-20T为 40mm  16T为 32mm）
gear_ratio: 80:16                   # 减速比
microsteps: 16                      # 细分

#[tmc2209 stepper_z3]                # 步进电机-z3 tmc2209驱动
#uart_pin: PA15                      # 驱动通信端口
#interpolate: True                   # 微步插值256
#run_current: 0.8                    # 运行电流mA
#hold_current: 0.8 #0.4                   # 保持电流mA
#sense_resistor: 0.110               # 驱动采样电阻不要改
#stealthchop_threshold: 200          # 静音阀值

####################################################################################
#   挤出机配置 Extruder
####################################################################################

#
##	In E0-MOT Position
[extruder]                        # 挤出机

step_pin: PD5                       # E0电机脉冲引脚
dir_pin: !PD6                       # 方向引脚设置
enable_pin: !PD4                    # 使能引脚设置

#Galileo2
rotation_distance: 47.088
gear_ratio: 9:1
microsteps: 16 						# 细分

#BMG
#rotation_distance: 21.525      # 步进值-Bondtech 5mm 驱动齿轮
#gear_ratio: 50:10				    # BMG 传动比
#microsteps: 16 						# 细分
#
full_steps_per_rotation: 200	    # 单圈脉冲数 （200 为 1.8 度, 400 为 0.9 度）
pressure_advance: 0.025 	        # 推进压力-尽量将压力保持在1.0以下
pressure_advance_smooth_time: 0.040 # 平稳推进时间-默认值为0.040
nozzle_diameter: 0.400              # 喷嘴直径
filament_diameter: 1.75             # 耗材直径
##      In E0 OUT Position
heater_pin: PB15                    # 加热棒引脚
sensor_pin: PC0                    # 传感器接口
min_temp: 0                        # 最小温度
max_temp: 330                       # 最大温度
max_power: 1.0                      # 最大功率
min_extrude_temp: 190               # 最小挤出温度

max_extrude_cross_section: 50 # MMU needs this
max_extrude_only_distance: 200 # MMU needs this

control = pid                      # PID喷嘴温度自动校准项（默认被注释）
#PID_CALIBRATE HEATER=extruder TARGET=290


##50w 綠色加熱棒 generic 3950
#sensor_type: Generic 3950
#pid_kp = 23.270                    # PID喷嘴温度自动校准项（默认被注释）
#pid_ki = 1.070                  # PID喷嘴温度自动校准项（默认被注释）
#pid_kd = 126.533                   # PID喷嘴温度自动校准项（默认被注释）

#50w 綠色加熱棒 pt1000 蜥蝪
#sensor_type: PT1000     #传感器型号
#pid_kp = 17.914                    # PID喷嘴温度自动校准项（默认被注释）
#pid_ki = 0.878                  # PID喷嘴温度自动校准项（默认被注释）
#pid_kd = 91.362                   # PID喷嘴温度自动校准项（默认被注释）

#50w 綠色加熱棒 pt1000 dragon high flow
sensor_type: PT1000     #传感器型号
pid_kp = 23.263                    # PID喷嘴温度自动校准项（默认被注释）
pid_ki = 1.062                  # PID喷嘴温度自动校准项（默认被注释）
pid_kd = 127.362                   # PID喷嘴温度自动校准项（默认被注释）

#拓竹
#sensor_type: NTC 100K MGB18-104F39050L32 #拓竹熱端
#pid_kp = 22.659                    # PID喷嘴温度自动校准项（默认被注释）
#pid_ki = 10.070                  # PID喷嘴温度自动校准项（默认被注释）
#pid_kd = 12.745                   # PID喷嘴温度自动校准项（默认被注释）


##	In E0-MOT Position
##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 extruder]                  # 挤出机 tmc2209驱动
uart_pin: PD7                       # 驱动通信端口
interpolate: false                  # 微步插值256
run_current: 0.6 #Galileo2          # 运行电流mA
#hold_current: 0.2                   # 保持电流mA
sense_resistor: 0.110               # 驱动采样电阻不要改
#stealthchop_threshold: 999999      # 静音阀值 前面加#为高速模式 去掉#为静音模式 建议高速模式

[verify_heater extruder]      # 加热块温度容差配置
max_error: 240                # 最大误差
check_gain_time: 40           # 容差时间
hysteresis: 5                # 容差温度
heating_gain: 2               # 加热增益

####################################################################################
#   热床配置 Bed Heater
####################################################################################
# 热床温度PID校准命令：  "PID_CALIBRATE HEATER=heater_bed TARGET=110"
[heater_bed]
##	SSR Pin - In BED OUT position
heater_pin: PB4                     # 热床接口      
sensor_type: NTC 100K MGB18-104F39050L32 # 热床传感器类型
sensor_pin: PB0                     # 热床传感器接口
max_power: 0.48                      # 热床功率
min_temp: 0                        # 最小温度（注意：测量温度超过设定值会触发紧急停止）
max_temp: 115                       # 最大温度（注意：测量温度超过设定值会触发紧急停止）
control: pid						# PID热床温度自动校准项（默认被注释）

#max power 0.48 110C
pid_kp: 31.713                      # PID热床温度自动校准项（默认被注释）
pid_ki: 1.036                     # PID热床温度自动校准项（默认被注释）
pid_kd: 242.602                     # PID热床温度自动校准项（默认被注释）
pwm_cycle_time: 0.02 #50hz

[verify_heater heater_bed]      # 加热块温度容差配置
max_error: 120                # 最大误差
check_gain_time: 120           # 容差时间
hysteresis: 5                # 容差温度
heating_gain: 2               # 加热增益

#####################################################################
#                            断料检测
#####################################################################
#[filament_switch_sensor DLJC]
## 当设置为True时，将在断料后立即执行暂停。请注意，如果pause_on_runout为False，将在断料后不执行，然后断料检测被禁用。默认是True。
#pause_on_runout: True
## 断料后要执行的 G 代码命令，如果pause_on_runout设置为 True 此 G 代码将在PAUSE 完成。默认不运行任何 G 代码命令。
#runout_gcode:
## 插入耗材丝后要执行的 G 代码命令，这默认是不运行任何 G-Code 命令，这会禁用插入检测。
#insert_gcode:
## 事件之间延迟的最短时间（以秒为单位）。在此时间段内触发的事件将被静默忽略。 默认值为 3 秒。
#event_delay: 3.0
## 暂停命令之间的延迟时间，以秒为单位调度和执行 runout_gcode。 如果出现奇怪的暂停行为，则增加此延迟。默认为 0.5 秒。
#pause_delay: 0.5
## 设置引脚，这个参数必须填
#switch_pin:PG15


####################################################################################
#	风扇配置 Fan Control
####################################################################################

[heater_fan hotend_fan] # 喉管冷却风扇
##	Hotend Fan - FAN0 Connector
pin: PA13                           # 信号接口v2.x
max_power: 1.0                      # 最大转速
kick_start_time: 0.5                # 启动时间（勿动）
heater: extruder                    # 关联的设备：挤出机
heater_temp: 50                # 挤出机达到多少度启动风扇
##	If you are experiencing back flow, you can reduce fan_speed
fan_speed: 1.0                      # 风扇转速

#[fan_generic fan]                               # 模型冷却风扇
[fan]                               # 模型冷却风扇
##	Print Cooling Fan - FAN1 Connector
pin: PA14                           # 信号接口v2.x
max_power: 1.0                      # 最大转速
kick_start_time: 0.5                # 启动时间（勿动）
##	Depending on your fan, you may need to increase this value
##	if your fan will not start. Can change cycle_time (increase)
##	if your fan is not able to slow down effectively
off_below: 0.10                     # 勿动

[heater_fan Electronic_Bay_Fan] 	# 电器仓风扇
##	Controller fan - FAN2 Connector
pin: PC8                            # 信号接口
kick_start_time: 0.5                # 启动时间（勿动）
heater: heater_bed                  # 关联的设备：热床
heater_temp: 45                     # 热床达到多少度启动风扇
fan_speed: 1.0                      # 风扇转速

#[heater_fan exhaust_fan]            # 打印仓排风扇
##  Exhaust fan - In E2 OUT Positon
#pin: PB3                            # 信号接口
#max_power: 1.0                      # 最大转速
#shutdown_speed: 0.0                 # 关闭速度（勿动）
#kick_start_time: 5.0                # 开启时间（勿动）
#heater: heater_bed                  # 关联的设备：热床
#heater_temp: 100                     # 热床达到多少度启动风扇
#fan_speed: 1.0                      # 风扇转速


####################################################################################
#	                         LED控制
####################################################################################

#[neopixel caselight]              # 输入英文的中括号启用这个定义
#pin:PB10                            # 主板引脚定义
#chain_count: 18 #36                      # 灯珠数量 
#color_order: GRB                 		 # 颜色顺序
#initial_RED: 1 #0.5                   # 红色 灯开机默认值最大是1
#initial_GREEN: 1 #0.5                 # 绿色 灯开机默认值最大是1
#initial_BLUE: 1 #0.5                  # 蓝色 灯开机默认值最大是1
#inital_WHITE: 0.0

#[gcode_macro caselight_test]
#gcode:
#	SET_LED LED="caselight" RED=0.4 GREEN=0.8 BLUE=1 WHITE=0 SYNC=0 TRANSMIT=1
#	
#[gcode_macro caselight_on]
#gcode:
#	SET_LED LED="caselight" RED=1 GREEN=1 BLUE=1 SYNC=0 TRANSMIT=1
#	
#[gcode_macro caselight_off]
#gcode:
#	SET_LED LED="caselight" RED=0 GREEN=0 BLUE=0 SYNC=0 TRANSMIT=1
#	
#[gcode_macro caselight_standby]
#gcode:
#	SET_LED LED="caselight" RED=0.1 GREEN=0.1 BLUE=0.1 SYNC=0 TRANSMIT=1

	
####################################################################################
#                          闲置关闭热床
####################################################################################

[idle_timeout]
timeout: 9000                       # 空闲时间超过150分钟则关闭热床

[safe_z_home]                       # Z轴限位坐标
home_xy_position: 150,150 #285,285            # Z原点所在的X、Y坐标（如100，100）， 执行。必须提供此参数。
speed: 50                           # 喷头移动到安全Z原点的速度，默认值为50 mm/s
z_hop: 10                           # 归位前提升Z轴的距离（mm），应用于任何归位命令，即使它没有使Z轴归位
z_hop_speed: 20                     # 归位前Z轴提升的速度（mm/s） 默认为20mm/s.
#safe_z_height: 10
move_to_previous: False             # 当设置为true时，xy将重置为z原点后重置为以前的位置，默认为 False.

#龙门架调平   
[quad_gantry_level]

gantry_corners:              # 300mm机器调平点位
	-60,-10
	360,370
points:
	50,25
	50,225
	250,225
	250,25
	

speed: 300 #100                         # 调平速度
horizontal_move_z: 10               # Z轴起始高度
retries: 10                          # 超公差重试次数
retry_tolerance: 0.0050                # 采样公差
max_adjust: 15                      # 调平最大调整行程

#床网
[bed_mesh]
speed: 100                          # 校准速度
horizontal_move_z: 3 #10                # Z轴运动速度
mesh_min: 30, 30                    # 最小校准点坐标x，y
mesh_max: 270,270                   # 最大校准点坐标x，y
fade_start: 0.6                     # 开始逐步淘汰调整的Z高度。在开始淡入淡出过程之前，最好先减少几层
fade_end: 10.0                      # 可以根据打印表面的弯曲程度来调整此值
fade_target: 0                      # 可以被认为是附加的Ž偏移褪色完成之后施加到整个床的
probe_count: 50, 50 #5,5                    # 采样点数（5X5为25点）
algorithm: bicubic                  # 算法模型
zero_reference_position: 150, 150

####################################################################################
# Pi及MCU温度监测
####################################################################################
[temperature_sensor IDM]
sensor_type: temperature_mcu
sensor_mcu: idm
min_temp: 0
max_temp: 100

[temperature_sensor ERCF]
sensor_type: temperature_mcu
sensor_mcu: mmu
min_temp: 0
max_temp: 60


[temperature_sensor Spider_Board]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 60

[temperature_sensor Raspberry_Pi]
sensor_type: temperature_host
sensor_path:/sys/class/thermal/thermal_zone0/temp
min_temp: 0
max_temp: 75

####################################################################################
# 	舱内热敏
####################################################################################

[temperature_sensor Chamber]              # 箱内温度（需要增加一颗温感）
sensor_type: Generic 3950      #热敏电阻类型
sensor_pin: PC1
#sensor_pin: PB1 #T4                      # 修改对应PIN（必填）
min_temp: 0
max_temp: 60

[temperature_sensor Electronic]              # 箱内温度（需要增加一颗温感）
sensor_type: Generic 3950      #热敏电阻类型
sensor_pin: PC2                    # 修改对应PIN（必填）
min_temp: 0
max_temp: 60

####################################################################################
#	Macros
####################################################################################
# The following status macros are available (these go inside of your macros):
#
#    STATUS_READY
#    STATUS_OFF
#    STATUS_BUSY
#    STATUS_HEATING
#    STATUS_LEVELING
#    STATUS_HOMING
#    STATUS_CLEANING
#    STATUS_MESHING
#    STATUS_CALIBRATING_Z

## Virtual SD Card                  # 虚拟SD卡
[virtual_sdcard]                    # 启用虚拟SD卡
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[display_status]

# Pause/Resume Functionality
[pause_resume]

[gcode_macro Movefilament]
gcode:
  MANUAL_STEPPER STEPPER=extruder MOVE=100 SPEED=10
  
[gcode_macro SAVE_Z_OFFSET]
gcode:
	Z_OFFSET_APPLY_PROBE
	
[gcode_macro GOTO_CENTRE]
gcode:
 {% if "xyz" not in printer.toolhead.homed_axes %}
   G28
   G1 X150 Y150 Z150 F3000
 {% endif %}
 
[gcode_macro CANCEL_PRINT]		#CANCEL_PRINT
description: Cancel the actual running print
rename_existing: BASE_CANCEL_PRINT
gcode:
    G91
    G1 Z+5 F600
    G90
    CLEAR_PAUSE
    SDCARD_RESET_FILE
	UPDATE_DELAYED_GCODE ID=filter_off DURATION=180
	MMU__EJECT
	G28 X Y
    TURN_OFF_HEATERS
	
[gcode_macro G32]#龙门架调平宏
gcode:
    BED_MESH_CLEAR
    G28
    QUAD_GANTRY_LEVEL
    G28
	G0 X150 Y150 Z30 F7200
	
[gcode_macro M109]
rename_existing: M99109
gcode:
    #Parameters
    {% set s = params.S|float %}
    
    M104 {% for p in params %}{'%s%s' % (p, params[p])}{% endfor %}  ; Set hotend temp
    {% if s != 0 %}
        TEMPERATURE_WAIT SENSOR=extruder MINIMUM={s} MAXIMUM={s+1}   ; Wait for hotend temp (within 1 degree)
    {% endif %}

[gcode_macro M190]
rename_existing: M99190
gcode:
    #Parameters
    {% set s = params.S|float %}

    M140 {% for p in params %}{'%s%s' % (p, params[p])}{% endfor %}   ; Set bed temp
    {% if s != 0 %}
        TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={s} MAXIMUM={s+1}  ; Wait for bed temp (within 1 degree)
    {% endif %}
	

[gcode_macro PRINT_START]#开始打印宏
#   Use PRINT_START for the slicer starting script - please customise for your slicer of choice
gcode:
	
	{% if REFERENCED_TOOLS == "!referenced_tools!" %}
    RESPOND MSG="Happy Hare gcode pre-processor is diabled"
    {% set REFERENCED_TOOLS = INITIAL_TOOL %}
	{% elif REFERENCED_TOOLS == "" %}
    RESPOND MSG="Happy Hare single color print"
    {% set REFERENCED_TOOLS = INITIAL_TOOL %}
	{% endif %}
	
	{% set BED_TEMP = params.BED_TEMP|default(100)|float %}
    {% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(260)|float %}
	{% set CHAMBER_TEMP = params.CHAMBER|default(0)|int %}
	{% set PROBE_TEMP = params.PROBE_TEMP|default(150)|float %}
	
	status_heating
	SET_FAN_SPEED FAN=Nevermore SPEED=1
	M190 S{BED_TEMP}
	M104 S{PROBE_TEMP}
	status_ready
    G92 E0 ;Reset Extruder                        
    BED_MESH_CLEAR
	status_cleaning
	status_homing
    G28
	G90
	status_leveling
	SET_DISPLAY_TEXT MSG="QGL"     							 # Displays info
	QUAD_GANTRY_LEVEL
	status_cleaning
	SET_DISPLAY_TEXT MSG="Bed Mesh Calibration"            # Display mesh calibration message	
	status_meshing
	BED_MESH_CALIBRATE
    BED_MESH_PROFILE LOAD=default
	status_heating
	SET_DISPLAY_TEXT MSG="Heating Nozzle: {EXTRUDER_TEMP}°C" # Display nozzle heating message
	M109 S{EXTRUDER_TEMP}
	status_ready
	SKEW_PROFILE LOAD=calilantern_skew_profile
	CLEAN_NOZZLE
	Smart_Park
	status_printing
	
	
[gcode_macro PRINT_END]#结束打印宏
#   Use PRINT_END for the slicer ending script - please customise for your slicer of choice
gcode:
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-10.0 F3600                ; retract filament
    G91                            ; relative positioning
    G0 Z5.00 X20.0 Y20.0 F10000    ; move nozzle to remove stringing
	TURN_OFF_HEATERS
    M107                           ; turn off fan
    G1 Z20 F3000                    ; move nozzle up 2mm
    G90                            ; absolute positioning
	G28 X Y
	BED_MESH_CLEAR
	UPDATE_DELAYED_GCODE ID=filter_off DURATION=180
	SET_SKEW CLEAR=1
	status_part_ready
	
[gcode_macro ZUP]
gcode:
    SET_GCODE_OFFSET Z_ADJUST=0.01 MOVE=1

[gcode_macro ZDOWN]
gcode:
    SET_GCODE_OFFSET Z_ADJUST=-0.01 MOVE=1
	
[gcode_macro Z_PROBE_CALIBRATE]
description: 测试Z偏移
gcode: 
    G28
    QUAD_GANTRY_LEVEL                                                # 龙门架调平
    G28
    PROBE_CALIBRATE

[gcode_macro PROBE_ACCURACY_TEST]
description: 测试PROBE稳定性
gcode:
    {% set probe_speed = params.PROBE_SPEED|default(10)|int %}
    {% set probe_samples = params.PROBE_SAMPLES|default(100)|int %}
    PROBE_ACCURACY PROBE_SPEED={probe_speed} SAMPLES={probe_samples}
	
[gcode_macro LOAD_FILAMENT]
variable_load_distance:  50
variable_purge_distance: 25
gcode:
    {% set speed = params.SPEED|default(150) %}
    {% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity  * 60 %}
    SAVE_GCODE_STATE NAME=load_state
    G91
    G92 E0
    G1 E{load_distance} F{max_velocity} # fast-load
    G1 E{purge_distance} F{speed} # purge
    RESTORE_GCODE_STATE NAME=load_state
	
[gcode_macro UNLOAD_FILAMENT]
variable_unload_distance:  50
variable_purge_distance:  25
gcode:
    {% set speed = params.SPEED|default(150) %}
    {% set max_velocity = printer.configfile.settings['extruder'].max_extrude_only_velocity  * 60 %}
    SAVE_GCODE_STATE NAME=unload_state
    G91
    G92 E0
    G1 E{purge_distance} F{speed} # purge
    G1 E-{unload_distance} F{max_velocity} # fast-unload
    RESTORE_GCODE_STATE NAME=unload_state

[gcode_macro BED_MESH_CALIBRATE]
rename_existing: _BED_MESH_CALIBRATE
gcode:
    {% set TARGET_TEMP = printer.heater_bed.target %}
    M140 S0
    _BED_MESH_CALIBRATE {rawparams}
    M140 S{TARGET_TEMP}

[gcode_macro QUAD_GANTRY_LEVEL]
rename_existing: _QUAD_GANTRY_LEVEL
gcode:
    SAVE_GCODE_STATE NAME=STATE_QGL
    BED_MESH_CLEAR
    {% if not printer.quad_gantry_level.applied %}
      _QUAD_GANTRY_LEVEL horizontal_move_z=10 retry_tolerance=1
    {% endif %}
    _QUAD_GANTRY_LEVEL horizontal_move_z=2
    RESTORE_GCODE_STATE NAME=STATE_QGL

[gcode_macro rewinder_test]
gcode:
    MMU_TEST_LOAD LENGTH=50
    {% for n in range(20) %}

# cycles currently set at 20, i.e. range(20).  You can changes this however you chose.
        MMU_SERVO POS=DOWN
#        MANUAL_STEPPER STEPPER="gear_stepper" SPEED=300 ACCEL=400 MOVE=800
        MMU_TEST_MOVE SPEED=300 ACCEL=400 MOVE=800
# change the SPEED and ACCEL as you see fit
        MMU_SERVO POS=UP
# to stop a macro mid-cycle you must use the e-stop.  This dwell allows you to hit the e-stop while the servo is up so that you can pull the filament out of the ERCF while the printer/macro is stopped
        MMU_SERVO POS=DOWN
        MMU_TEST_MOVE SPEED=300 ACCEL=400 MOVE=-800
        MMU_SERVO POS=UP

    {% endfor %}


[gcode_macro rewinder_test_multitool]
gcode:
    {% set gates = [5] %} # [0,1,2,3,4,5] move between these gates
    {% set test_load_length = params.TEST_LOAD_LENGTH | default(50) | float %}
    {% set repeats = params.REPEATS | default(20) | int %}
    {% set speed = params.SPEED | default(300) | float %}
    {% set accel = params.ACCEL | default(400) | float %}
    {% set length = params.LENGTH | default(800) | float %}

    MMU_HOME

#    MMU_TEST_LOAD LENGTH=50
    {% for n in range(repeats) %}
        {% for gate in gates %}
            MMU_SELECT GATE={gate}
            MMU_TEST_LOAD LENGTH={test_load_length} # preload gate for a bit of length
            MMU_TEST_MOVE SPEED={speed} ACCEL={accel} MOVE={length}
            MMU_SERVO POS=UP
            MMU_TEST_MOVE SPEED={speed} ACCEL={accel} MOVE=-{length}
            MMU_EJECT
            MMU_RECOVER

        {% endfor %}
  
    {% endfor %}
	

############################## 

## 	Thermistor Types
##   "EPCOS 100K B57560G104F"
##   "ATC Semitec 104GT-2"
##   "NTC 100K beta 3950"
##   "Honeywell 100K 135-104LAG-J01"
##   "NTC 100K MGB18-104F39050L32" (Keenovo Heater Pad)
##   "AD595"
##   "PT100 INA826"

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.101694, 0.105235, 0.108524, 0.109379, 0.113763, 0.118477, 0.124670, 0.135915, 0.142225, 0.148431, 0.148616, 0.145982, 0.138560, 0.127551, 0.114956, 0.103238, 0.093754, 0.090712, 0.085971, 0.085070, 0.083182, 0.083489, 0.080540, 0.076226, 0.069466, 0.059842, 0.053074, 0.042938, 0.036316, 0.030474, 0.027851, 0.029918, 0.035008, 0.043692, 0.052688, 0.056861, 0.058460, 0.056733, 0.049770, 0.044068, 0.037458, 0.032116, 0.026352, 0.022355, 0.016514, 0.016956, 0.017710, 0.019405, 0.021494, 0.020284
#*# 	  0.099094, 0.100575, 0.097879, 0.101321, 0.107437, 0.110990, 0.120315, 0.130874, 0.138060, 0.141808, 0.142100, 0.138630, 0.129559, 0.117964, 0.104084, 0.096124, 0.089996, 0.086878, 0.083807, 0.082759, 0.081311, 0.081247, 0.078071, 0.074952, 0.066590, 0.057219, 0.050302, 0.040345, 0.036277, 0.031413, 0.032352, 0.037217, 0.043917, 0.052775, 0.059205, 0.062392, 0.061336, 0.057758, 0.051409, 0.044885, 0.039082, 0.033316, 0.027507, 0.023102, 0.018186, 0.019597, 0.019152, 0.021910, 0.022944, 0.019796
#*# 	  0.094897, 0.101245, 0.100993, 0.101176, 0.106787, 0.109067, 0.114990, 0.126389, 0.135492, 0.143360, 0.144143, 0.140702, 0.134062, 0.123565, 0.110421, 0.101980, 0.095583, 0.094609, 0.093304, 0.090195, 0.087985, 0.088664, 0.083267, 0.079463, 0.073782, 0.062983, 0.057112, 0.046974, 0.041522, 0.036294, 0.034041, 0.037037, 0.042156, 0.049832, 0.057856, 0.060687, 0.060937, 0.057678, 0.052266, 0.044036, 0.037392, 0.032231, 0.027918, 0.023105, 0.016762, 0.016174, 0.016726, 0.018595, 0.021839, 0.019821
#*# 	  0.093103, 0.093743, 0.091949, 0.094953, 0.097781, 0.101944, 0.111705, 0.124001, 0.132707, 0.138725, 0.140103, 0.136813, 0.127859, 0.115598, 0.104729, 0.096261, 0.092999, 0.089985, 0.089284, 0.086357, 0.083773, 0.083124, 0.077389, 0.075245, 0.067542, 0.058924, 0.051253, 0.042068, 0.038498, 0.034133, 0.033642, 0.038788, 0.044801, 0.054140, 0.060919, 0.064484, 0.063830, 0.059469, 0.052462, 0.045363, 0.039297, 0.034213, 0.029680, 0.023968, 0.018807, 0.018936, 0.017943, 0.020632, 0.020647, 0.018428
#*# 	  0.086415, 0.091915, 0.094674, 0.092472, 0.096943, 0.099114, 0.106677, 0.119045, 0.130077, 0.138571, 0.140830, 0.138119, 0.130328, 0.118341, 0.108060, 0.098446, 0.094600, 0.093436, 0.091895, 0.089831, 0.084954, 0.084034, 0.080512, 0.076776, 0.070301, 0.058351, 0.053710, 0.044337, 0.038190, 0.034548, 0.031462, 0.033385, 0.037242, 0.046024, 0.054408, 0.059530, 0.061072, 0.058114, 0.050871, 0.043230, 0.036530, 0.031127, 0.027177, 0.021535, 0.015627, 0.014420, 0.014229, 0.015948, 0.017474, 0.016830
#*# 	  0.083137, 0.085816, 0.088216, 0.087971, 0.090007, 0.096462, 0.106389, 0.120109, 0.129430, 0.135490, 0.135767, 0.131573, 0.124441, 0.110459, 0.103002, 0.093414, 0.090354, 0.086030, 0.084520, 0.078382, 0.078297, 0.077117, 0.074127, 0.071075, 0.060853, 0.051645, 0.045296, 0.036804, 0.031899, 0.029266, 0.028501, 0.031772, 0.037225, 0.046273, 0.055349, 0.063074, 0.063878, 0.059767, 0.052308, 0.044334, 0.037831, 0.033126, 0.027144, 0.021143, 0.016848, 0.018166, 0.017903, 0.017101, 0.013971, 0.013205
#*# 	  0.076394, 0.079489, 0.084036, 0.084538, 0.087594, 0.089870, 0.099814, 0.111065, 0.122985, 0.130795, 0.132619, 0.129334, 0.123793, 0.113013, 0.104499, 0.095275, 0.089525, 0.085859, 0.083372, 0.079806, 0.077888, 0.078152, 0.074667, 0.070724, 0.064958, 0.052624, 0.046083, 0.036190, 0.030119, 0.026555, 0.022977, 0.025219, 0.029226, 0.039041, 0.047119, 0.056396, 0.059173, 0.057706, 0.051925, 0.044767, 0.036995, 0.030548, 0.026094, 0.018211, 0.014353, 0.014171, 0.015546, 0.018838, 0.014561, 0.014021
#*# 	  0.074360, 0.073906, 0.073663, 0.077883, 0.081912, 0.088065, 0.098958, 0.111688, 0.119950, 0.125292, 0.126447, 0.122150, 0.115555, 0.103892, 0.095809, 0.086000, 0.081499, 0.076351, 0.075777, 0.073032, 0.070707, 0.069510, 0.066493, 0.064568, 0.056067, 0.045767, 0.038618, 0.027944, 0.022633, 0.018170, 0.017693, 0.021913, 0.027653, 0.040036, 0.048733, 0.056760, 0.059997, 0.058443, 0.052279, 0.044876, 0.036975, 0.030918, 0.023486, 0.016007, 0.013712, 0.015824, 0.016601, 0.018627, 0.019132, 0.015147
#*# 	  0.063471, 0.068302, 0.071191, 0.070687, 0.077152, 0.083984, 0.091771, 0.103090, 0.112069, 0.119552, 0.120865, 0.119061, 0.113076, 0.104779, 0.094528, 0.085718, 0.077599, 0.074612, 0.071266, 0.067979, 0.066410, 0.068245, 0.063363, 0.059311, 0.054950, 0.042736, 0.035633, 0.026364, 0.017752, 0.012435, 0.009654, 0.011679, 0.016455, 0.027977, 0.037969, 0.047489, 0.052992, 0.053088, 0.049706, 0.043510, 0.037097, 0.030369, 0.023365, 0.015641, 0.010113, 0.012418, 0.017870, 0.016476, 0.011361, 0.007685
#*# 	  0.058833, 0.060581, 0.061529, 0.065794, 0.073059, 0.080077, 0.089457, 0.101091, 0.108279, 0.113312, 0.115314, 0.112911, 0.105772, 0.094910, 0.085058, 0.074022, 0.067497, 0.062748, 0.059463, 0.057730, 0.056942, 0.056677, 0.051006, 0.049740, 0.042245, 0.033285, 0.025191, 0.014036, 0.007006, 0.000362, -0.000414, 0.004237, 0.013348, 0.026838, 0.037764, 0.048324, 0.052397, 0.051094, 0.046758, 0.040213, 0.034557, 0.027284, 0.018678, 0.009809, 0.004458, 0.003934, 0.003755, 0.006834, 0.009602, 0.004467
#*# 	  0.049753, 0.054369, 0.059201, 0.061441, 0.068020, 0.074515, 0.082992, 0.094369, 0.102279, 0.110080, 0.110907, 0.110120, 0.105282, 0.094370, 0.082773, 0.072805, 0.063968, 0.059951, 0.055264, 0.052202, 0.048149, 0.048405, 0.045536, 0.044399, 0.041759, 0.032053, 0.025240, 0.012826, 0.003311, -0.004969, -0.009272, -0.007398, 0.000369, 0.014431, 0.026021, 0.035692, 0.041845, 0.042442, 0.040620, 0.035795, 0.030118, 0.025049, 0.019668, 0.009886, 0.000527, -0.001941, -0.002732, -0.000308, -0.001691, -0.003368
#*# 	  0.044077, 0.048111, 0.052747, 0.056201, 0.063219, 0.071257, 0.080002, 0.091196, 0.100312, 0.105419, 0.106030, 0.103917, 0.096366, 0.085183, 0.072495, 0.062019, 0.054139, 0.047744, 0.041746, 0.035158, 0.032374, 0.034144, 0.034003, 0.033830, 0.027797, 0.021085, 0.012650, 0.000599, -0.008788, -0.017754, -0.019548, -0.015494, -0.004099, 0.009291, 0.020544, 0.031380, 0.035004, 0.035096, 0.031125, 0.026118, 0.021550, 0.015909, 0.008271, -0.001531, -0.008067, -0.009802, -0.010379, -0.010801, -0.014852, -0.016608
#*# 	  0.038889, 0.042018, 0.050999, 0.054525, 0.059754, 0.065809, 0.074027, 0.084700, 0.093515, 0.101736, 0.102971, 0.102238, 0.095503, 0.086087, 0.075697, 0.062819, 0.053116, 0.046119, 0.038203, 0.033653, 0.028131, 0.029232, 0.028936, 0.027238, 0.025263, 0.018032, 0.012664, 0.000657, -0.008294, -0.019893, -0.024241, -0.023577, -0.017995, -0.005383, 0.006808, 0.017504, 0.024714, 0.025208, 0.024776, 0.018256, 0.013292, 0.009052, 0.003609, -0.004904, -0.013313, -0.015990, -0.017391, -0.017629, -0.019233, -0.022346
#*# 	  0.039708, 0.040952, 0.044934, 0.050732, 0.055962, 0.065007, 0.073883, 0.085445, 0.092466, 0.098646, 0.099339, 0.096480, 0.087792, 0.078380, 0.066394, 0.055908, 0.046916, 0.039703, 0.033624, 0.027267, 0.022980, 0.022349, 0.021208, 0.020836, 0.016532, 0.010152, 0.003185, -0.007005, -0.016294, -0.026572, -0.028172, -0.027470, -0.018945, -0.008488, 0.003637, 0.014316, 0.018573, 0.018454, 0.013581, 0.007290, 0.002191, -0.002825, -0.010168, -0.016496, -0.022613, -0.025309, -0.026336, -0.027711, -0.030015, -0.032565
#*# 	  0.034564, 0.040224, 0.043066, 0.046434, 0.054961, 0.060868, 0.070330, 0.080123, 0.089100, 0.096112, 0.097644, 0.097115, 0.089721, 0.079795, 0.068558, 0.057058, 0.049028, 0.042704, 0.035363, 0.030165, 0.023632, 0.022422, 0.020643, 0.018646, 0.015136, 0.009842, 0.003122, -0.004996, -0.013418, -0.022179, -0.027968, -0.030069, -0.026455, -0.016649, -0.007642, 0.004755, 0.011765, 0.013973, 0.011105, 0.003528, -0.002751, -0.009788, -0.015536, -0.020969, -0.026530, -0.029877, -0.030181, -0.032573, -0.033337, -0.035899
#*# 	  0.034024, 0.035581, 0.036726, 0.041844, 0.047868, 0.054713, 0.064249, 0.075026, 0.083353, 0.088826, 0.090576, 0.087786, 0.079127, 0.067656, 0.056331, 0.047129, 0.041334, 0.034225, 0.028553, 0.022074, 0.017904, 0.015843, 0.012396, 0.009912, 0.006784, 0.000768, -0.007532, -0.014116, -0.021186, -0.028014, -0.032745, -0.032526, -0.026878, -0.018388, -0.009586, 0.000897, 0.005533, 0.005843, -0.001559, -0.009169, -0.016228, -0.022775, -0.028655, -0.032829, -0.037941, -0.037798, -0.040255, -0.040604, -0.040870, -0.042945
#*# 	  0.025671, 0.031250, 0.034422, 0.038422, 0.043959, 0.049357, 0.058295, 0.066803, 0.076211, 0.084182, 0.086620, 0.086307, 0.078627, 0.069374, 0.057189, 0.046414, 0.040242, 0.035510, 0.030424, 0.025447, 0.020745, 0.020007, 0.017427, 0.015382, 0.012934, 0.005971, -0.003225, -0.011231, -0.017125, -0.024184, -0.031923, -0.035788, -0.033747, -0.026273, -0.018894, -0.008735, -0.003558, -0.000626, -0.003238, -0.011522, -0.018331, -0.024843, -0.031550, -0.037957, -0.043233, -0.044546, -0.042330, -0.043291, -0.043917, -0.045552
#*# 	  0.022171, 0.023769, 0.026880, 0.031625, 0.035776, 0.041780, 0.048807, 0.059982, 0.068304, 0.074025, 0.076490, 0.074391, 0.065734, 0.055572, 0.044307, 0.036256, 0.031834, 0.027629, 0.023579, 0.017321, 0.013721, 0.011512, 0.012698, 0.009440, 0.003551, -0.004647, -0.010459, -0.017466, -0.025990, -0.031262, -0.036296, -0.039955, -0.035812, -0.027833, -0.018894, -0.010234, -0.008536, -0.009508, -0.015628, -0.022024, -0.029604, -0.034068, -0.042482, -0.046712, -0.052301, -0.051315, -0.050064, -0.049577, -0.048144, -0.049333
#*# 	  0.015541, 0.021201, 0.025788, 0.028646, 0.031457, 0.035392, 0.041936, 0.052115, 0.062393, 0.069747, 0.071972, 0.069865, 0.063684, 0.054415, 0.044898, 0.036031, 0.030500, 0.027046, 0.021375, 0.016727, 0.014286, 0.016779, 0.019551, 0.015038, 0.007953, 0.002932, -0.003760, -0.009665, -0.020092, -0.027910, -0.035192, -0.041649, -0.038880, -0.032481, -0.025408, -0.014968, -0.011810, -0.012059, -0.017263, -0.023978, -0.029408, -0.035037, -0.040907, -0.048544, -0.053970, -0.054009, -0.051606, -0.051255, -0.047849, -0.048470
#*# 	  0.012501, 0.013418, 0.016189, 0.019330, 0.021876, 0.026282, 0.034243, 0.044040, 0.053165, 0.058505, 0.060659, 0.057818, 0.049931, 0.040354, 0.030619, 0.023270, 0.018763, 0.014803, 0.011025, 0.011468, 0.019582, 0.024073, 0.020486, 0.013599, 0.008896, 0.005250, 0.003530, -0.001789, -0.011401, -0.024337, -0.039200, -0.045377, -0.041663, -0.033658, -0.024339, -0.017027, -0.016418, -0.019356, -0.026850, -0.032414, -0.037236, -0.041806, -0.049933, -0.055519, -0.058996, -0.056823, -0.056724, -0.055116, -0.052844, -0.051910
#*# 	  0.006595, 0.009643, 0.010278, 0.012566, 0.016675, 0.020290, 0.027507, 0.037159, 0.046425, 0.052470, 0.054958, 0.054152, 0.047507, 0.037898, 0.028391, 0.020212, 0.014986, 0.012793, 0.010781, 0.013169, 0.020575, 0.024749, 0.024275, 0.014286, 0.013119, 0.003229, 0.002271, 0.002438, -0.005247, -0.017248, -0.028575, -0.042758, -0.045306, -0.037673, -0.028542, -0.018026, -0.016610, -0.017519, -0.022781, -0.031343, -0.037958, -0.042532, -0.048659, -0.054172, -0.058388, -0.058658, -0.055323, -0.054332, -0.052667, -0.051908
#*# 	  0.001272, 0.000464, -0.000608, 0.002249, 0.004462, 0.010626, 0.020869, 0.031570, 0.041692, 0.045368, 0.045723, 0.042405, 0.034304, 0.023780, 0.014544, 0.008268, 0.004400, 0.002184, 0.002804, 0.009317, 0.019384, 0.033874, 0.029801, 0.010610, 0.003124, 0.000306, 0.002863, 0.005083, -0.002027, -0.022577, -0.035700, -0.046628, -0.045411, -0.036551, -0.027171, -0.019825, -0.019230, -0.021958, -0.029328, -0.037530, -0.044596, -0.049630, -0.055966, -0.056896, -0.059493, -0.056713, -0.056638, -0.053943, -0.052004, -0.052720
#*# 	  -0.004173, -0.002414, -0.001474, -0.000410, 0.004867, 0.006109, 0.015466, 0.025385, 0.036534, 0.044087, 0.044651, 0.042927, 0.035335, 0.024472, 0.014258, 0.005719, 0.000225, -0.002122, -0.002878, 0.001720, 0.012330, 0.020975, 0.022396, 0.013708, -0.001554, -0.010560, -0.010746, -0.007458, -0.017093, -0.026275, -0.036166, -0.049059, -0.051593, -0.042786, -0.033354, -0.022322, -0.019165, -0.021127, -0.024829, -0.035114, -0.040960, -0.046816, -0.052973, -0.056137, -0.058426, -0.056114, -0.054679, -0.054653, -0.050985, -0.051252
#*# 	  -0.010020, -0.009971, -0.010088, -0.005608, -0.003053, 0.002913, 0.015351, 0.026769, 0.038458, 0.043217, 0.042082, 0.036904, 0.025003, 0.013873, 0.004655, -0.002417, -0.006396, -0.009030, -0.011828, -0.008496, 0.003873, 0.009630, 0.008978, 0.005478, -0.009664, -0.019105, -0.016667, -0.018943, -0.028389, -0.040687, -0.052571, -0.056916, -0.052416, -0.043067, -0.033246, -0.024606, -0.023775, -0.025988, -0.031421, -0.040973, -0.046529, -0.052092, -0.057296, -0.058245, -0.059598, -0.056692, -0.055102, -0.053312, -0.050392, -0.051069
#*# 	  -0.016028, -0.011993, -0.007921, -0.007782, -0.002272, 0.001276, 0.013360, 0.023130, 0.037576, 0.045835, 0.045340, 0.041414, 0.031547, 0.019642, 0.006801, -0.002718, -0.009476, -0.013173, -0.019175, -0.019423, -0.018014, -0.004242, -0.001299, -0.003883, -0.003118, -0.011031, -0.013282, -0.021906, -0.027846, -0.047858, -0.058505, -0.062973, -0.059245, -0.049691, -0.040140, -0.028522, -0.024355, -0.026158, -0.027427, -0.038174, -0.043843, -0.051027, -0.055355, -0.058082, -0.060569, -0.059340, -0.055722, -0.054750, -0.051388, -0.051150
#*# 	  -0.018526, -0.015619, -0.012712, -0.006766, -0.004255, 0.004210, 0.016237, 0.028800, 0.041471, 0.047223, 0.046891, 0.040045, 0.027652, 0.012487, 0.001234, -0.010688, -0.016415, -0.021911, -0.024837, -0.026902, -0.024094, -0.013205, -0.001246, 0.002574, 0.002333, 0.001999, -0.006024, -0.019383, -0.038434, -0.054566, -0.060424, -0.063368, -0.057017, -0.048073, -0.036771, -0.027584, -0.025852, -0.027698, -0.033847, -0.042215, -0.047844, -0.053687, -0.058580, -0.059128, -0.059754, -0.055790, -0.053379, -0.052339, -0.049653, -0.049617
#*# 	  -0.018562, -0.016688, -0.014375, -0.009646, -0.001336, 0.002952, 0.017062, 0.028142, 0.044500, 0.053396, 0.054617, 0.049658, 0.038777, 0.023322, 0.009713, -0.004394, -0.014159, -0.018998, -0.024111, -0.026923, -0.028349, -0.022598, -0.010621, -0.000163, 0.005012, 0.015274, 0.003699, -0.008476, -0.028254, -0.051136, -0.058204, -0.061646, -0.058070, -0.046215, -0.035310, -0.024524, -0.019634, -0.021526, -0.024199, -0.034243, -0.038905, -0.043408, -0.049623, -0.052325, -0.053723, -0.052710, -0.048774, -0.046611, -0.044376, -0.042503
#*# 	  -0.018531, -0.019577, -0.018509, -0.009428, -0.004737, 0.004117, 0.018059, 0.034784, 0.048606, 0.055273, 0.054224, 0.049133, 0.035446, 0.017614, 0.003159, -0.011282, -0.019055, -0.024183, -0.027149, -0.027259, -0.027166, -0.019073, -0.008924, 0.000348, 0.008367, 0.008447, -0.003418, -0.019327, -0.043343, -0.053675, -0.057491, -0.058595, -0.051443, -0.040334, -0.027615, -0.019091, -0.017451, -0.021345, -0.027815, -0.036708, -0.040660, -0.045529, -0.049503, -0.050479, -0.051488, -0.047625, -0.045393, -0.042579, -0.038808, -0.037352
#*# 	  -0.022477, -0.018856, -0.017905, -0.013404, -0.004038, 0.001391, 0.015549, 0.029371, 0.045239, 0.056881, 0.057925, 0.055087, 0.044061, 0.027502, 0.011517, -0.004249, -0.016268, -0.022497, -0.027363, -0.028404, -0.027249, -0.023636, -0.019259, -0.011363, -0.003767, -0.002530, -0.008502, -0.023566, -0.040915, -0.053329, -0.057599, -0.060404, -0.052824, -0.041051, -0.027567, -0.017464, -0.012707, -0.015163, -0.018565, -0.028494, -0.034650, -0.039300, -0.042521, -0.044064, -0.046321, -0.044708, -0.040809, -0.037658, -0.034356, -0.031476
#*# 	  -0.023061, -0.021521, -0.018224, -0.010291, -0.006355, 0.002277, 0.017366, 0.031780, 0.048648, 0.056062, 0.056464, 0.049916, 0.035886, 0.020804, 0.005098, -0.008115, -0.016347, -0.023027, -0.026619, -0.026752, -0.026044, -0.024145, -0.022872, -0.016060, -0.012282, -0.015955, -0.025310, -0.035633, -0.046658, -0.054248, -0.057822, -0.056191, -0.046991, -0.032892, -0.020346, -0.012239, -0.011008, -0.013251, -0.020729, -0.030183, -0.036322, -0.041510, -0.043567, -0.044391, -0.045104, -0.042154, -0.035025, -0.029947, -0.024616, -0.021672
#*# 	  -0.028451, -0.022899, -0.016853, -0.011217, -0.004531, -0.000569, 0.013585, 0.027617, 0.043948, 0.055494, 0.057855, 0.054848, 0.043886, 0.027937, 0.012147, -0.003041, -0.012951, -0.017984, -0.024668, -0.027895, -0.030276, -0.028438, -0.025434, -0.021466, -0.019197, -0.022769, -0.029262, -0.036851, -0.042777, -0.053627, -0.057778, -0.057768, -0.050880, -0.037852, -0.022108, -0.011657, -0.006204, -0.005357, -0.009376, -0.017874, -0.027885, -0.034091, -0.037842, -0.040382, -0.040937, -0.040590, -0.033371, -0.024377, -0.018745, -0.013300
#*# 	  -0.030020, -0.022709, -0.016697, -0.011220, -0.006893, 0.001616, 0.015124, 0.029694, 0.043634, 0.051606, 0.052394, 0.046717, 0.035238, 0.018685, 0.004639, -0.007097, -0.015511, -0.021158, -0.026379, -0.030312, -0.029487, -0.025485, -0.020675, -0.016416, -0.019161, -0.023835, -0.031237, -0.037268, -0.045912, -0.053243, -0.056102, -0.054005, -0.044195, -0.027813, -0.015625, -0.005975, -0.002217, -0.002899, -0.009390, -0.018874, -0.027142, -0.033708, -0.039235, -0.041712, -0.040870, -0.032942, -0.020214, -0.011288, -0.005033, -0.002031
#*# 	  -0.035498, -0.028600, -0.019585, -0.014088, -0.006971, -0.002735, 0.009788, 0.022787, 0.036035, 0.045805, 0.048393, 0.045701, 0.036282, 0.023906, 0.007744, -0.004853, -0.015279, -0.021305, -0.026927, -0.030418, -0.030132, -0.026812, -0.022286, -0.019820, -0.018775, -0.021895, -0.027925, -0.036855, -0.043848, -0.053538, -0.056797, -0.057027, -0.048505, -0.034598, -0.018870, -0.006168, 0.001218, 0.004017, 0.000385, -0.007760, -0.019208, -0.026059, -0.031539, -0.031777, -0.028820, -0.029471, -0.021117, -0.011451, -0.005622, 0.000565
#*# 	  -0.037581, -0.031580, -0.023729, -0.014298, -0.008837, 0.000746, 0.010639, 0.023188, 0.032645, 0.039382, 0.041402, 0.037005, 0.027711, 0.010418, -0.002666, -0.013539, -0.019555, -0.025270, -0.028060, -0.026761, -0.026623, -0.022991, -0.020077, -0.017631, -0.018611, -0.024026, -0.029358, -0.037297, -0.045305, -0.052714, -0.055103, -0.054404, -0.045000, -0.028823, -0.013491, -0.000424, 0.005881, 0.006700, -0.000975, -0.012861, -0.023954, -0.030247, -0.035116, -0.034684, -0.029042, -0.022001, -0.008066, 0.002241, 0.004279, 0.007125
#*# 	  -0.045044, -0.039047, -0.031427, -0.023264, -0.011742, -0.005311, 0.006009, 0.016350, 0.027566, 0.033804, 0.036307, 0.033991, 0.026213, 0.013498, -0.001671, -0.013702, -0.021476, -0.025857, -0.030490, -0.030707, -0.028515, -0.025414, -0.023458, -0.023137, -0.021852, -0.025929, -0.030599, -0.035068, -0.043943, -0.054042, -0.058459, -0.058245, -0.051105, -0.036613, -0.021144, -0.005186, 0.005540, 0.011107, 0.008447, -0.004112, -0.015494, -0.023404, -0.024038, -0.025154, -0.025105, -0.023373, -0.014655, -0.002373, 0.002017, 0.005368
#*# 	  -0.049352, -0.042663, -0.031875, -0.019532, -0.011641, -0.002397, 0.006124, 0.017774, 0.024916, 0.030436, 0.031243, 0.025447, 0.015822, 0.001838, -0.012468, -0.022325, -0.027791, -0.030755, -0.031815, -0.030259, -0.029241, -0.026123, -0.025934, -0.025325, -0.024516, -0.029433, -0.030553, -0.036971, -0.047931, -0.057034, -0.060162, -0.057540, -0.046956, -0.033588, -0.018613, -0.004105, 0.005404, 0.005404, -0.001350, -0.012762, -0.023240, -0.028280, -0.030978, -0.029720, -0.024712, -0.022085, -0.015759, -0.007315, 0.000157, 0.005269
#*# 	  -0.052536, -0.046461, -0.034330, -0.024559, -0.012901, -0.003778, 0.006768, 0.016190, 0.024964, 0.030656, 0.031992, 0.028538, 0.020691, 0.007655, -0.006726, -0.019554, -0.026252, -0.029690, -0.033004, -0.034594, -0.035192, -0.033703, -0.030054, -0.028071, -0.025389, -0.026278, -0.029924, -0.034963, -0.044882, -0.056292, -0.061713, -0.060617, -0.052876, -0.040171, -0.026329, -0.010927, -0.001147, 0.003086, 0.000344, -0.007946, -0.017592, -0.025062, -0.029487, -0.033489, -0.031810, -0.024991, -0.015284, -0.007424, -0.002392, 0.001868
#*# 	  -0.048415, -0.039600, -0.029231, -0.018500, -0.008687, 0.001615, 0.012718, 0.021720, 0.029738, 0.033205, 0.031859, 0.026236, 0.014783, 0.001857, -0.011641, -0.022034, -0.026978, -0.030657, -0.033359, -0.034769, -0.036572, -0.032720, -0.028176, -0.024841, -0.024468, -0.025622, -0.030549, -0.038213, -0.049211, -0.057446, -0.061319, -0.059670, -0.049774, -0.035264, -0.023778, -0.011291, -0.004918, -0.004343, -0.007913, -0.016382, -0.022807, -0.026458, -0.030649, -0.033987, -0.034493, -0.028496, -0.017823, -0.008908, -0.001416, 0.001541
#*# 	  -0.046566, -0.039005, -0.027617, -0.018701, -0.007681, 0.001561, 0.010943, 0.021086, 0.030817, 0.036548, 0.035605, 0.031802, 0.022401, 0.010627, -0.003463, -0.016180, -0.024010, -0.029201, -0.033292, -0.035208, -0.035656, -0.031296, -0.027900, -0.024150, -0.021605, -0.022557, -0.027462, -0.036617, -0.045344, -0.053142, -0.055913, -0.054869, -0.049997, -0.038008, -0.026619, -0.013362, -0.006623, -0.003479, -0.005509, -0.012162, -0.017720, -0.022639, -0.026291, -0.029674, -0.031749, -0.029170, -0.021508, -0.012292, -0.005061, -0.000607
#*# 	  -0.039400, -0.033204, -0.023488, -0.015585, -0.005020, 0.004305, 0.014668, 0.025405, 0.033537, 0.035648, 0.035162, 0.028509, 0.018113, 0.006623, -0.008177, -0.017999, -0.026621, -0.032837, -0.035633, -0.035106, -0.033554, -0.029373, -0.025190, -0.021078, -0.021350, -0.025974, -0.032661, -0.042790, -0.051560, -0.056813, -0.055964, -0.051624, -0.045129, -0.034626, -0.023875, -0.012878, -0.007986, -0.007023, -0.010223, -0.017469, -0.021438, -0.024778, -0.029499, -0.032732, -0.033460, -0.027245, -0.018720, -0.008181, -0.000860, 0.003188
#*# 	  -0.035003, -0.029524, -0.022701, -0.015489, -0.004586, 0.004799, 0.014682, 0.025466, 0.034409, 0.039670, 0.038911, 0.035754, 0.028514, 0.016608, 0.003784, -0.008376, -0.019383, -0.026031, -0.032680, -0.034296, -0.031789, -0.027119, -0.023077, -0.019901, -0.021375, -0.026099, -0.030539, -0.035503, -0.044551, -0.052305, -0.054890, -0.053287, -0.047975, -0.037078, -0.025242, -0.014002, -0.007036, -0.005847, -0.008189, -0.011847, -0.016809, -0.019988, -0.024034, -0.026802, -0.029696, -0.027036, -0.019605, -0.012240, -0.005772, 0.001568
#*# 	  -0.029883, -0.026167, -0.020092, -0.012714, -0.004311, 0.005181, 0.015774, 0.027690, 0.035241, 0.039536, 0.038539, 0.033614, 0.026121, 0.015678, 0.000099, -0.010042, -0.020873, -0.027166, -0.031885, -0.033023, -0.029199, -0.025017, -0.022246, -0.022960, -0.026277, -0.029988, -0.033063, -0.039327, -0.046705, -0.053974, -0.055192, -0.054744, -0.046967, -0.036165, -0.022303, -0.011207, -0.006838, -0.008008, -0.011648, -0.014072, -0.017979, -0.022875, -0.026319, -0.028154, -0.028073, -0.023779, -0.015585, -0.007786, -0.001238, 0.008646
#*# 	  -0.026469, -0.023774, -0.017599, -0.012909, -0.003702, 0.002176, 0.013424, 0.024539, 0.036059, 0.040904, 0.042881, 0.041591, 0.036179, 0.025889, 0.010906, -0.000696, -0.010828, -0.019029, -0.025824, -0.028174, -0.027199, -0.025099, -0.024723, -0.023490, -0.023771, -0.026253, -0.029965, -0.033484, -0.041506, -0.048815, -0.051449, -0.052028, -0.047906, -0.036935, -0.024265, -0.012072, -0.003885, -0.001807, -0.004844, -0.011016, -0.015905, -0.019175, -0.024271, -0.027457, -0.026992, -0.022643, -0.016413, -0.007422, -0.001194, 0.009524
#*# 	  -0.025980, -0.017475, -0.010453, -0.004744, 0.001130, 0.008503, 0.018696, 0.030220, 0.037490, 0.045073, 0.045788, 0.041884, 0.033521, 0.022086, 0.008546, -0.003766, -0.011550, -0.016701, -0.020334, -0.023307, -0.025444, -0.022498, -0.022342, -0.020338, -0.022251, -0.025080, -0.031464, -0.034916, -0.042834, -0.049692, -0.051380, -0.050980, -0.043111, -0.030863, -0.015562, -0.004784, 0.000556, 0.000354, -0.005880, -0.012685, -0.017134, -0.021087, -0.024081, -0.024627, -0.023709, -0.016796, -0.010099, -0.002644, 0.009762, 0.026398
#*# 	  -0.019009, -0.010613, -0.002874, -0.000950, 0.005444, 0.011133, 0.021586, 0.031467, 0.041087, 0.048737, 0.052731, 0.049441, 0.042432, 0.033566, 0.021860, 0.009738, -0.001849, -0.007072, -0.011166, -0.015528, -0.020299, -0.017286, -0.013997, -0.012388, -0.013778, -0.016250, -0.021319, -0.029553, -0.035159, -0.043177, -0.044610, -0.045401, -0.041633, -0.028598, -0.017001, -0.002295, 0.002521, 0.004657, 0.001062, -0.006798, -0.010116, -0.013763, -0.018083, -0.019255, -0.019838, -0.016510, -0.008267, -0.002209, 0.011082, 0.033178
#*# 	  -0.012688, -0.005581, -0.000106, 0.005077, 0.011307, 0.019046, 0.027734, 0.040689, 0.047925, 0.054787, 0.053711, 0.049624, 0.041875, 0.030088, 0.020028, 0.009254, 0.002537, -0.002661, -0.006911, -0.010265, -0.010825, -0.008198, -0.006795, -0.005296, -0.008262, -0.012603, -0.020747, -0.029503, -0.036572, -0.040651, -0.040539, -0.039593, -0.030228, -0.016795, -0.003464, 0.006073, 0.009038, 0.008478, 0.002715, -0.003915, -0.007996, -0.012198, -0.014903, -0.016029, -0.015573, -0.009318, 0.001556, 0.013171, 0.036844, 0.066709
#*# 	  -0.013432, -0.005731, 0.001631, 0.005507, 0.014569, 0.020528, 0.031451, 0.042715, 0.051844, 0.059206, 0.061251, 0.058460, 0.053702, 0.042856, 0.031594, 0.021975, 0.014257, 0.008994, 0.002115, -0.001560, -0.003178, -0.001325, 0.001442, 0.004855, 0.003999, -0.003776, -0.010361, -0.019062, -0.025709, -0.033794, -0.033974, -0.032301, -0.026454, -0.014315, -0.001787, 0.010089, 0.012557, 0.011534, 0.008924, 0.001663, -0.001283, -0.005065, -0.009601, -0.011818, -0.012378, -0.009011, 0.003101, 0.017353, 0.040504, 0.073377
#*# 	  -0.012054, -0.004574, 0.002271, 0.009430, 0.017514, 0.025292, 0.036675, 0.050012, 0.055962, 0.064042, 0.064246, 0.060572, 0.052590, 0.040387, 0.031318, 0.022947, 0.018443, 0.013131, 0.009487, 0.007149, 0.009266, 0.010999, 0.012394, 0.013655, 0.007754, 0.001419, -0.004711, -0.010924, -0.021227, -0.026369, -0.025774, -0.023963, -0.014827, -0.001293, 0.011145, 0.020751, 0.020955, 0.018675, 0.014054, 0.008369, 0.004825, 0.000304, -0.003501, -0.007129, -0.005749, 0.003949, 0.019899, 0.040028, 0.071852, 0.118049
#*# 	  -0.015023, -0.008572, -0.000329, 0.006835, 0.017537, 0.026336, 0.037011, 0.048843, 0.059717, 0.066604, 0.071291, 0.069664, 0.064421, 0.053826, 0.043694, 0.033250, 0.026547, 0.023201, 0.019679, 0.017531, 0.017648, 0.021340, 0.022226, 0.022374, 0.019964, 0.014778, 0.010941, 0.003904, -0.004507, -0.013401, -0.014474, -0.015033, -0.009536, 0.001052, 0.014157, 0.023430, 0.028615, 0.027207, 0.023043, 0.017665, 0.012496, 0.007188, 0.002066, -0.001491, -0.003090, 0.004045, 0.021903, 0.041245, 0.074855, 0.120063
#*# 	  -0.023749, -0.016619, -0.007117, 0.000858, 0.008156, 0.020212, 0.033851, 0.047816, 0.057632, 0.066598, 0.069262, 0.068245, 0.060772, 0.049002, 0.038865, 0.029890, 0.026161, 0.023416, 0.022637, 0.021214, 0.022770, 0.026170, 0.028623, 0.028164, 0.025093, 0.019801, 0.016124, 0.009484, 0.001593, -0.006344, -0.009447, -0.009024, -0.001281, 0.011530, 0.022908, 0.030709, 0.033343, 0.031994, 0.026663, 0.021112, 0.014555, 0.009318, 0.005597, 0.003962, 0.006484, 0.018878, 0.039361, 0.067870, 0.108695, 0.167945
#*# x_count = 50
#*# y_count = 50
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 270.0
#*# min_y = 30.0
#*# max_y = 270.0
#*#
#*# [skew_correction calilantern_skew_profile]
#*# xy_skew = -0.0010324707906548345
#*# xz_skew = -0.0026943194131738082
#*# yz_skew = 0.0014072098644825443
#*#
#*# [scanner model default]
#*# model_coef = 1.4075631319994841,
#*# 	  1.8302888938483635,
#*# 	  0.7306500811219772,
#*# 	  0.2518587354441732,
#*# 	  0.47400921054756034,
#*# 	  0.7868098198780222,
#*# 	  -0.4035329949250449,
#*# 	  -0.951766411561959,
#*# 	  0.340541601702851,
#*# 	  0.5333931754853812
#*# model_domain = 3.1649950278304067e-07,3.2956172018120654e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 46.600894
#*# model_offset = 0.00000
#*#
#*# [scanner]
#*# z_offset = 0.000
